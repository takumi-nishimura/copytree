# Repository Guidelines

## Project Structure & Module Organization
- `src/` holds all runtime code: `main.rs` wires CLI entry points, while `args.rs`, `walker.rs`, and `output.rs` split argument parsing, filesystem traversal, and formatting logic respectively
- `docs/design.md` records architectural notes and should be updated when behavior changes
- `target/` is generated by Cargo; never commit its contents

## Build, Test, and Development Commands
- `cargo build` compiles the binary and surfaces type errors quickly
- `cargo run -- <path> [flags]` executes the CLI for manual verification; pass sample roots to confirm copy behavior
- `cargo test` runs unit and doc tests; use `cargo test -- --nocapture` when debugging stdout expectations
- `cargo fmt` and `cargo clippy -- -D warnings` enforce formatting and lint gates before submission

## Coding Style & Naming Conventions
- Follow idiomatic Rust style: 4-space indents, `snake_case` for modules/functions, `PascalCase` for types, and `SCREAMING_SNAKE_CASE` for constants
- Keep modules cohesive: traversal logic stays inside `walker.rs`; output-related helpers should live in `output.rs`
- Run `cargo fmt` prior to every commit to ensure consistent rustfmt output

## Testing Guidelines
- Prefer colocated unit tests inside the relevant module using `#[cfg(test)]` blocks; integration tests can live in `tests/` when spanning multiple modules
- Name tests after behavior, e.g., `copies_nested_directories` or `prints_tree_without_duplicates`
- Ensure new features cover both success and error paths; verify filesystem side effects using temp directories via `tempfile`

## Commit & Pull Request Guidelines
- Write imperative, concise commit titles (`limit large file output` style) and keep bodies focused on the “why”
- Cross-reference issues or discussions with `closes #id` when applicable, and summarize behavioral changes plus manual verification steps
- PRs should include reproduction steps, before/after examples (CLI output snippets), and note any docs updates in `docs/`

## Operational Notes
- Avoid committing sample directories or large fixture trees; generate them ad hoc under `target/` during local testing
- Document any new CLI flags or breaking changes in `docs/design.md` alongside user-facing behavior in the README once it exists
